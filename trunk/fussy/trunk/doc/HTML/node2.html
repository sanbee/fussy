<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Error propagation: Single variable case</TITLE>
<META NAME="description" CONTENT="Error propagation: Single variable case">
<META NAME="keywords" CONTENT="fussy">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="fussy.css">

<LINK REL="next" HREF="node3.html">
<LINK REL="previous" HREF="node1.html">
<LINK REL="up" HREF="fussy.html">
<LINK REL="next" HREF="node3.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html64"
  HREF="node3.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next.png"></A> 
<A NAME="tex2html62"
  HREF="fussy.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up.png"></A> 
<A NAME="tex2html56"
  HREF="node1.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html65"
  HREF="node3.html">Error propagation: Algorithm for</A>
<B> Up:</B> <A NAME="tex2html63"
  HREF="fussy.html">The fussy language: Implementation</A>
<B> Previous:</B> <A NAME="tex2html57"
  HREF="node1.html">Introduction</A>
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html66"
  HREF="node2.html#SECTION00021000000000000000">Example</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00020000000000000000"></A>
<A NAME="SEC:SINGLE_VAR"></A>
<BR>
Error propagation: Single variable case
</H1>

<P>
For the case where <IMG
 WIDTH="16" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img6.png"
 ALT="$f$"> is a function of a single measurable <IMG
 WIDTH="14" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img12.png"
 ALT="$x$">, the
right hand side of Eq.&nbsp;<A HREF="node1.html#FERR">1</A> can be evaluated as follows.  Each
leaf of the parsing tree will either be (1) a constant, (2) a
variable, or (3) another sub-tree representing a sub-expression.  The
derivatives can be computed by the repeated application of the
derivative chain rule.  Starting from the bottom of the tree, a value
of <IMG
 WIDTH="14" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$1$"> is pushed on the Derivative Stack (<TT>DS</TT>) (equivalent of putting
<!-- MATH
 $\partial x / \partial x$
 -->
<IMG
 WIDTH="52" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img14.png"
 ALT="$\partial x / \partial x$"> on the stack) for every leaf of the tree
(which, at the bottom, correspond to the symbols from the symbol
table or constants).  The nodes of a tree corresponds to one of the
arithmetic operators ('<TT>+</TT>', '<TT>-</TT>', '<TT>/</TT>', '<TT>*</TT>',
'<TT>^</TT>', and '<TT>**</TT>') or built-in functions, which are
implemented as function calls.  These functions push the result of the
operations on the <TT>VMS</TT> while the corresponding partial derivatives
are pushed on the <TT>DS</TT>.

<P>
The final result and the error propagation will in general use the
values from both the stacks (the <TT>VMS</TT> and the <TT>DS</TT>).  E.g. for
<!-- MATH
 $f(x)=\sin(x)*\cos(x)$
 -->
<IMG
 WIDTH="170" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img15.png"
 ALT="$f(x)=\sin(x)*\cos(x)$">, when the execution reaches the node for the
'<IMG
 WIDTH="14" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img16.png"
 ALT="$*$">' operator, the <TT>VMS</TT> will have two values, namely <IMG
 WIDTH="49" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img17.png"
 ALT="$\sin(x)$"> and
<IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$">.  The <TT>DS</TT> also has two values, namely the two derivatives
<!-- MATH
 $\partial \sin(x) / \partial x = \cos(x)$
 -->
<IMG
 WIDTH="160" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$\partial \sin(x) / \partial x = \cos(x)$"> and <!-- MATH
 $\partial \cos(x) /
\partial x = -\sin(x)$
 -->
<IMG
 WIDTH="176" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$\partial \cos(x) /
\partial x = -\sin(x)$">.  The value of <IMG
 WIDTH="16" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img6.png"
 ALT="$f$"> is pushed on the <TT>VMS</TT>,
and its derivate (<!-- MATH
 $\partial \sin(x) / \partial x * \cos(x) + \sin(x) *
\partial \cos(x) / \partial x$
 -->
<IMG
 WIDTH="326" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img21.png"
 ALT="$\partial \sin(x) / \partial x * \cos(x) + \sin(x) *
\partial \cos(x) / \partial x$">), computed using both the stacks, pushed
on the <TT>DS</TT>.  The '<TT>=</TT>' operator rule finally takes the value from
the <TT>DS</TT>, and compute the right hand side of Eq.&nbsp;<A HREF="node1.html#FERR">1</A>.

<P>
An arbitrary expression composed of user defined variables or built-in
functions, will itself be represented as a sub-tree.  Hence, applying
the above algorithm recursively, case (3) above (a sub-expression)
will also be correctly handled.

<P>

<H2><A NAME="SECTION00021000000000000000">
Example</A>
</H2>

<DIV ALIGN="CENTER"><A NAME="EX1"></A><A NAME="121"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure:</STRONG>
The parsing tree for the expression <!-- MATH
 $f(x)=\sin(x)*\cos(x) + \sin(\cos(x))$
 -->
<IMG
 WIDTH="274" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$f(x)=\sin(x)*\cos(x) + \sin(\cos(x))$"></CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="192" HEIGHT="139" ALIGN="BOTTOM" BORDER="0"
 SRC="img23.png"
 ALT="\includegraphics[scale=0.45]{Figs/fig1}">

</DIV></TD></TR>
</TABLE>
</DIV>
Let <!-- MATH
 $f(x)=\sin(x)*\cos(x) + \sin(\cos(x))$
 -->
<IMG
 WIDTH="274" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$f(x)=\sin(x)*\cos(x) + \sin(\cos(x))$"> (this includes three
sub-expressions one of which is a functional), represented as a tree
in Fig.&nbsp;<A HREF="#EX1">1</A>.  A value of <IMG
 WIDTH="14" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$1$"> is pushed on the <TT>DS</TT> whenever a
symbol from the symbol-table is pushed on the <TT>VMS</TT>.  When branch <B>1</B> in the above tree is reduced, a call to the built-in function
<IMG
 WIDTH="27" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img24.png"
 ALT="$\sin$"> pops a value from the <TT>VMS</TT> (which is <IMG
 WIDTH="14" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img12.png"
 ALT="$x$">) and a value from the
<TT>DS</TT> (say <IMG
 WIDTH="24" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img25.png"
 ALT="$dx$">, which is <IMG
 WIDTH="14" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$1$">).  It then pushes the value of <IMG
 WIDTH="49" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img17.png"
 ALT="$\sin(x)$">
on the <TT>VMS</TT> and a value of <!-- MATH
 $dx*\partial \sin(x) / \partial x =
1*\cos(x)$
 -->
<IMG
 WIDTH="224" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img26.png"
 ALT="$dx*\partial \sin(x) / \partial x =
1*\cos(x)$"> on the <TT>DS</TT>.  Similar operations are done for evaluating
<IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$">.  When the execution reaches node <B>2</B>, the <TT>VMS</TT> has the
values <IMG
 WIDTH="49" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img17.png"
 ALT="$\sin(x)$"> (<TT>L</TT>) and <IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$"> (<TT>R</TT>) and the <TT>DS</TT> has
<IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$"> (<TT>dL</TT>) and <IMG
 WIDTH="65" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img27.png"
 ALT="$-\sin(x)$"> (<TT>dR</TT>).  Since '<IMG
 WIDTH="14" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img16.png"
 ALT="$*$">' is a
binary operator, when node <B>2</B> is reduced, two values each from
the <TT>VMS</TT> and the <TT>DS</TT> are poped.  The multiplication operator then
pushes <TT>L*R</TT>=<!-- MATH
 $\sin(x)*\cos(x)$
 -->
<IMG
 WIDTH="114" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img28.png"
 ALT="$\sin(x)*\cos(x)$"> on the <TT>VMS</TT> while <TT>L*dR +
R*dL</TT>=<!-- MATH
 $\cos^2(x)-\sin^2(x)$
 -->
<IMG
 WIDTH="132" HEIGHT="42" ALIGN="MIDDLE" BORDER="0"
 SRC="img29.png"
 ALT="$\cos^2(x)-\sin^2(x)$"> is pushed on the <TT>DS</TT> (note that this uses
values from the <TT>DS</TT> as well as from the VMS).  Both the stacks now
have one value each - <TT>VMS</TT> the value of the sub-expression
<!-- MATH
 $\sin(x)*\cos(x)$
 -->
<IMG
 WIDTH="114" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img28.png"
 ALT="$\sin(x)*\cos(x)$"> and the <TT>DS</TT> the value of the derivative of this
sub-expression.

<P>
Next, branch <B>3</B> is evaluated.  Again, <IMG
 WIDTH="14" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$1$"> and <IMG
 WIDTH="14" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img12.png"
 ALT="$x$"> are pushed on
the <TT>DS</TT> and the <TT>VMS</TT> respectively.  A call to <IMG
 WIDTH="30" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img30.png"
 ALT="$\cos$"> compute the
derivative of <IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$"> (namely, <IMG
 WIDTH="65" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img27.png"
 ALT="$-\sin(x)$">) and multiplies it by the
top of the <TT>DS</TT> (which is <IMG
 WIDTH="14" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$1$">).  When call for <IMG
 WIDTH="27" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img24.png"
 ALT="$\sin$"> is made, its
argument (<IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$">) and the derivative of the argument are on the
<TT>DS</TT> and <TT>VMS</TT> respectively. A value from the <TT>VMS</TT> and <TT>DS</TT> each (say
<TT>L</TT>=<IMG
 WIDTH="52" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img18.png"
 ALT="$\cos(x)$"> and <TT>dL</TT> =<IMG
 WIDTH="65" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img27.png"
 ALT="$-\sin(x)$">) respectively) are poped.
<!-- MATH
 $\sin(L)=\sin(\cos(x))$
 -->
<IMG
 WIDTH="156" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img31.png"
 ALT="$\sin(L)=\sin(\cos(x))$"> and <TT>dL</TT><!-- MATH
 $*\sin(L)=-\sin(x)*\sin(\cos(x))$
 -->
<IMG
 WIDTH="246" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img32.png"
 ALT="$*\sin(L)=-\sin(x)*\sin(\cos(x))$">
are pushed on the <TT>VMS</TT> and <TT>DS</TT> respectively.  This is the equivalent
of Eq.&nbsp;<A HREF="node1.html#DFUNCTIONAL">2</A> for branch <B>3</B>.  At this stage, the two
values on the <TT>VMS</TT> are the values of the two sub-expression and <TT>DS</TT> has the values of the partial derivatives of the two sub-expressions.

<P>
Reduction of the node <B>4</B> will then again invoke the rule for the
derivative and the binary operator for addition: pop two values each
from the <TT>VMS</TT> and <TT>DS</TT>, push the result of the operator on the <TT>VMS</TT>,
and the derivative (<TT>dL+dR</TT> in this case) on the <TT>DS</TT>.  Top of the
<TT>DS</TT> now has <!-- MATH
 $\partial f / \partial x$
 -->
<IMG
 WIDTH="53" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img33.png"
 ALT="$\partial f / \partial x$"> and the '<TT>=</TT>' operator
computes Eq. <A HREF="node1.html#FERR">1</A>.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html64"
  HREF="node3.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next.png"></A> 
<A NAME="tex2html62"
  HREF="fussy.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up.png"></A> 
<A NAME="tex2html56"
  HREF="node1.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html65"
  HREF="node3.html">Error propagation: Algorithm for</A>
<B> Up:</B> <A NAME="tex2html63"
  HREF="fussy.html">The fussy language: Implementation</A>
<B> Previous:</B> <A NAME="tex2html57"
  HREF="node1.html">Introduction</A>
<!--End of Navigation Panel-->
<ADDRESS>
Sanjay Bhatnagar
2011-05-28
</ADDRESS>
</BODY>
</HTML>
